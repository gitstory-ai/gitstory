# TASK-0001.1.6.2: Write troubleshooting guide and validate documentation

**Parent Story**: [STORY-0001.1.6](README.md)
**Status**: ðŸ”µ Not Started
**Estimated Hours**: 8
**Actual Hours**: -

## Objective

Write troubleshooting guide (300-500 words) and validate all reference documentation for completeness, accuracy, and link integrity. This ensures users can self-serve when encountering common issues.

## Implementation Checklist

### Create troubleshooting.md

- [ ] Create `skills/gitstory/references/troubleshooting.md`
- [ ] Add introduction section (30-50 words):
  - Purpose of this guide
  - When to use it
  - Where to get additional help

- [ ] Add "Template not found" issue (50-75 words):
  - Symptom: FileNotFoundError when loading template
  - Cause: Template doesn't exist at any priority level
  - Solution steps:
    1. Check template name spelling
    2. Verify template file exists in {baseDir}/templates/
    3. Check file permissions (readable)
    4. Try absolute path for debugging
  - Example command to check

- [ ] Add "YAML syntax errors" issue (50-75 words):
  - Symptom: yaml.YAMLError when parsing template/config
  - Cause: Invalid YAML syntax (indentation, missing colons, etc.)
  - Solution steps:
    1. Validate YAML syntax: `python -c "import yaml; yaml.safe_load(open('file.yaml'))"`
    2. Check indentation (use spaces, not tabs)
    3. Check for missing colons after keys
    4. Check for unquoted special characters
  - Common YAML mistakes list

- [ ] Add "Config not loading" issue (50-75 words):
  - Symptom: Command uses default config instead of custom one
  - Cause: Config file in wrong location or wrong priority
  - Solution steps:
    1. Verify config file location (.gitstory/commands/ for project override)
    2. Check config_version field matches supported version
    3. Validate YAML syntax
    4. Check file permissions
  - Lookup priority reminder

- [ ] Add "{baseDir} path issues" issue (40-60 words):
  - Symptom: {baseDir} not resolving correctly in cross-references
  - Cause: Path resolution varies by installation type
  - Solution steps:
    1. Verify skill installed correctly
    2. Check .claude-plugin/config.json exists
    3. Try absolute paths for debugging
  - Reference TASK-0001.1.2.1 research findings

- [ ] Add "Config version mismatch" issue (40-60 words):
  - Symptom: ValueError about unsupported config_version
  - Cause: Config file has different version than code expects
  - Solution steps:
    1. Check config_version field in YAML
    2. Update to current version: "1.0"
    3. Review migration guide (if upgrading from older version)
  - Reference STORY-0001.1.5 for config versioning

- [ ] Add debugging steps section (50-75 words):
  - Enable verbose logging (if available)
  - Check file paths with absolute paths
  - Validate YAML files separately
  - Test with minimal config
  - Isolate the problem (template vs config vs code)

- [ ] Add "Where to get help" section (30-50 words):
  - GitHub Issues: file bug reports
  - Discussions: ask questions
  - Documentation: check reference guides
  - Source code: read implementation

### Cross-Reference Links

- [ ] Add links from troubleshooting.md to other guides:
  - Template issues â†’ {baseDir}/references/template-authoring.md
  - Config issues â†’ {baseDir}/references/command-configuration.md
  - {baseDir} issues â†’ reference TASK-0001.1.2.1 research

- [ ] Verify all cross-references use {baseDir} pattern:
  - No hardcoded paths
  - Consistent pattern usage
  - Links are relative to skill root

### Documentation Validation

- [ ] Validate all reference docs exist:
  ```bash
  ls -l skills/gitstory/references/
  # Should show: template-authoring.md, command-configuration.md, troubleshooting.md
  ```

- [ ] Verify word counts for all docs:
  ```bash
  for doc in skills/gitstory/references/*.md; do
    words=$(grep -Ev '^(```|#)' "$doc" | wc -w)
    echo "$(basename $doc): $words words"
  done
  # template-authoring.md: 500-1000 words
  # command-configuration.md: 500-1000 words
  # troubleshooting.md: 300-500 words
  ```

- [ ] Validate markdown renders correctly for all docs:
  - [ ] Open each file in markdown preview
  - [ ] Check headings display as h1/h2/h3
  - [ ] Check lists show bullets/numbers
  - [ ] Check code blocks show syntax highlighting
  - [ ] Check links are clickable

- [ ] Verify all cross-references resolve:
  ```bash
  # Find all {baseDir} references
  grep -r "{baseDir}/references/" skills/gitstory/

  # Check each referenced file exists
  for ref in template-authoring.md command-configuration.md troubleshooting.md; do
    test -f "skills/gitstory/references/$ref" && echo "âœ“ $ref exists" || echo "âœ— $ref missing"
  done
  ```

- [ ] Validate code examples are accurate:
  - [ ] YAML examples have valid syntax
  - [ ] Code examples match actual implementation
  - [ ] Bash commands can be copy-pasted and run
  - [ ] Python snippets are syntactically correct

- [ ] Check for broken links:
  ```bash
  # Find all markdown links
  grep -r '\[.*\](.*)' skills/gitstory/references/

  # Verify internal links resolve
  # Verify external links are accessible (manual check)
  ```

### Optional: Add Python Validation Tests

Per TESTING.md, can add unit tests for documentation:

- [ ] Create or update `tests/test_documentation.py`:

```python
from pathlib import Path

def test_reference_docs_exist():
    """Verify all reference docs are present."""
    refs = Path("skills/gitstory/references")
    assert refs.exists()

    required_docs = [
        "template-authoring.md",
        "command-configuration.md",
        "troubleshooting.md"
    ]

    for doc in required_docs:
        assert (refs / doc).exists(), f"Missing: {doc}"

def test_template_authoring_word_count():
    """Verify template authoring guide meets word count."""
    doc = Path("skills/gitstory/references/template-authoring.md")
    content = doc.read_text()
    # Exclude code blocks and headings
    lines = [line for line in content.split('\n')
             if not line.startswith('#') and not line.startswith('```')]
    words = len(' '.join(lines).split())
    assert 500 <= words <= 1000, f"Word count {words} not in range 500-1000"

def test_command_config_word_count():
    """Verify command config guide meets word count."""
    doc = Path("skills/gitstory/references/command-configuration.md")
    content = doc.read_text()
    lines = [line for line in content.split('\n')
             if not line.startswith('#') and not line.startswith('```')]
    words = len(' '.join(lines).split())
    assert 500 <= words <= 1000, f"Word count {words} not in range 500-1000"

def test_troubleshooting_word_count():
    """Verify troubleshooting guide meets word count."""
    doc = Path("skills/gitstory/references/troubleshooting.md")
    content = doc.read_text()
    lines = [line for line in content.split('\n')
             if not line.startswith('#') and not line.startswith('```')]
    words = len(' '.join(lines).split())
    assert 300 <= words <= 500, f"Word count {words} not in range 300-500"

def test_cross_references_use_basedir():
    """Verify all cross-references use {baseDir} pattern."""
    refs = Path("skills/gitstory/references")
    for doc in refs.glob("*.md"):
        content = doc.read_text()
        # Check for hardcoded paths (anti-pattern)
        assert "skills/gitstory/references/" not in content, \
            f"{doc.name} has hardcoded path (should use {{baseDir}})"
```

Note: Python tests are optional - primary validation is manual using bash commands above.

### Final Verification

- [ ] All 3 reference docs exist
- [ ] Word counts within ranges:
  - template-authoring.md: 500-1000 words
  - command-configuration.md: 500-1000 words
  - troubleshooting.md: 300-500 words
- [ ] All markdown files render correctly
- [ ] Cross-references use {baseDir} pattern consistently
- [ ] No broken links (internal or external)
- [ ] Code examples are accurate and runnable
- [ ] All files committed to git

## Files to Create/Modify

- **CREATE**: `skills/gitstory/references/troubleshooting.md` (~400 words body + code examples = ~70 lines)
  - Sections: Introduction, Common Issues (5), Debugging Steps, Where to Get Help
- **MODIFY** (optional): `tests/test_documentation.py` (add comprehensive reference doc validation tests)
- **VERIFY**: `skills/gitstory/references/template-authoring.md` (from TASK-0001.1.6.1)
- **VERIFY**: `skills/gitstory/references/command-configuration.md` (from TASK-0001.1.6.1)

## Pattern Reuse

- Word count validation from TASK-0001.1.3.2
- Cross-reference pattern using {baseDir} from STORY-0001.1.2
- Documentation testing patterns from TASK-0001.1.3.2 (SKILL.md validation)
- Manual validation workflow from TESTING.md

## Dependencies

- TASK-0001.1.6.1 complete: template-authoring.md and command-configuration.md exist
- STORY-0001.1.2 complete: {baseDir} pattern established
- STORY-0001.1.4 complete: Template system implemented (examples to reference)
- STORY-0001.1.5 complete: Command config system implemented (examples to reference)

## Word Count Target

**troubleshooting.md (400 words total):**
- Introduction: 30-50 words
- Template not found: 50-75 words
- YAML syntax errors: 50-75 words
- Config not loading: 50-75 words
- {baseDir} path issues: 40-60 words
- Config version mismatch: 40-60 words
- Debugging steps: 50-75 words
- Where to get help: 30-50 words

## Notes

**Testing strategy**: Per TESTING.md, these are markdown documentation files (infrastructure). Manual validation using bash commands and markdown preview is primary approach. Python unit tests are optional but recommended for this validation-focused task.

**Validation focus**: This task emphasizes validation of all reference docs (not just troubleshooting.md). Comprehensive checks for word counts, cross-references, code examples, and link integrity.

**Common issues**: Based on anticipated user problems with template/config systems. May need updates after real-world usage feedback.

**Success criteria**:
- troubleshooting.md created with 300-500 words
- All 3 reference docs validated (word counts, links, examples)
- Markdown renders correctly for all docs
- Cross-references use {baseDir} pattern consistently
- No broken links
- Code examples are accurate and runnable
