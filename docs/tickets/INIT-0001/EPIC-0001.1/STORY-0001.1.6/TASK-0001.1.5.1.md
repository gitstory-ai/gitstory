# TASK-0001.1.5.1: Create plan.yaml and review.yaml with validation

**Parent Story**: [STORY-0001.1.5](README.md)
**Status**: ðŸ”µ Not Started
**Estimated Hours**: 12
**Actual Hours**: -

## Objective

Create command configuration files (plan.yaml with interview questions, review.yaml with quality thresholds) for all 6 ticket types. These configs enable user customization of command behavior without code changes.

## Implementation Checklist

### Directory Verification

- [ ] Verify commands directory exists: `test -d skills/gitstory/commands/`
- [ ] If missing, directory should have been created in STORY-0001.1.2

### Create plan.yaml

- [ ] Create `skills/gitstory/commands/plan.yaml`
- [ ] Add config metadata:
  - `config_version: "1.0"`
  - Comment explaining version tracking
- [ ] Add interview questions for initiative type (3-5 questions):
  - Objective (textarea, required)
  - Key results (list, 3-5 items)
  - Timeline (string, e.g., "Q4 2025")
- [ ] Add interview questions for epic type (3-4 questions):
  - Overview/deliverable (textarea, required)
  - Story points (integer, enum: 13, 21, 34, 55)
  - Key scenarios (list, 2+ items)
- [ ] Add interview questions for story type (4-5 questions):
  - User role (string, "As a...")
  - Goal (string, "I want...")
  - Benefit (string, "So that...")
  - Acceptance criteria (list, 2+ items)
  - Story points (integer, enum: 1, 2, 3, 5, 8, 13, 21)
- [ ] Add interview questions for task type (2-3 questions):
  - Implementation steps (list, checklist format)
  - Estimated hours (integer, 2-8 range)
  - Files to modify (list, optional)
- [ ] Add interview questions for bug type (3-4 questions):
  - Severity (enum: High, Medium, Low)
  - Reproduction steps (list, 2+ items)
  - Environment (string, OS/version info)
- [ ] Add interview questions for generic type (2 questions):
  - Description (textarea, required)
  - Custom fields (flexible)

### Create review.yaml

- [ ] Create `skills/gitstory/commands/review.yaml`
- [ ] Add config metadata:
  - `config_version: "1.0"`
- [ ] Add quality thresholds per ticket type:
  - initiative: 85%
  - epic: 70%
  - story: 85%
  - task: 95%
  - bug: 85%
  - generic: 70%
- [ ] Add vague term penalties (3 severity levels):
  - High severity: terms like "improve", "enhance", "better" (penalty: -10 points)
  - Medium severity: terms like "should", "might", "usually" (penalty: -5 points)
  - Low severity: terms like "etc", "various", "some" (penalty: -2 points)
- [ ] Add acceptance criteria requirements:
  - min_criteria_per_story: 2
  - require_testable: true
  - forbid_vague_verbs: ["should work", "is good", "functions properly"]

### Validation

- [ ] Validate YAML syntax for both files:
  ```bash
  python -c "import yaml; yaml.safe_load(open('skills/gitstory/commands/plan.yaml'))"
  python -c "import yaml; yaml.safe_load(open('skills/gitstory/commands/review.yaml'))"
  ```

- [ ] Verify config_version field present in both files
- [ ] Verify all 6 ticket types covered in plan.yaml
- [ ] Verify all 6 ticket types have thresholds in review.yaml
- [ ] Verify interview questions have required fields:
  - prompt (string)
  - field (string, maps to template field)
  - type (string/integer/enum/list/textarea)
  - required (boolean)

### Documentation

- [ ] Add inline comments to plan.yaml explaining:
  - Question types and when to use each
  - How fields map to template frontmatter
  - Validation patterns (regex examples)
- [ ] Add inline comments to review.yaml explaining:
  - Quality threshold ranges (70-95%)
  - Penalty calculation logic
  - How to customize for project needs

## Files to Create/Modify

- **CREATE**: `skills/gitstory/commands/plan.yaml` (~200 lines, 6 ticket types Ã— ~30 lines each + metadata)
- **CREATE**: `skills/gitstory/commands/review.yaml` (~100 lines, thresholds + penalties + requirements)

## Pattern Reuse

None - This is foundational configuration work with no existing patterns to reuse.

## Dependencies

- STORY-0001.1.2 complete: skills/gitstory/commands/ directory exists
- STORY-0001.1.4 complete: Template field schemas to reference
- Python 3.12+ with PyYAML for validation

## Notes

**Testing strategy**: Per TESTING.md, these are YAML configuration files (infrastructure). Manual validation using Python yaml.safe_load(). Python unit tests for config loading will be created in TASK-0001.1.5.2.

**Config versioning**: config_version field enables future format changes. Commands will validate version on load and error if unsupported.

**Customization**: Users can override these configs by placing files in `.gitstory/commands/` (project) or `~/.claude/skills/gitstory/commands/` (user). Priority lookup implemented in TASK-0001.1.5.2.

**Success criteria**:
- Both files created with valid YAML
- All 6 ticket types configured
- Config version field present
- Inline documentation helpful
