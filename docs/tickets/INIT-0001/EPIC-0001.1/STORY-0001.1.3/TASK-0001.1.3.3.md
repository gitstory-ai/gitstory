# TASK-0001.1.3.3: Create 6 templates with YAML frontmatter and markdown scaffolds

**Parent Story**: [STORY-0001.1.3](README.md)
**Status**: ðŸ”µ Not Started
**Estimated Hours**: 8
**Actual Hours**: -

## Objective

Create all 6 template files (init.md, epic.md, story.md, task.md, bug.md, custom.md) with complete YAML frontmatter field schemas and markdown body scaffolds matching ticket hierarchy conventions.

## BDD Progress

**Before this task**: 2/6 scenarios passing
**After this task**: 5/6 scenarios passing

**Scenarios for this task:**

- Scenario 2: Template includes YAML frontmatter with field schemas (FULL - all templates have frontmatter)
- Scenario 3: Template field validation follows JSON Schema patterns (FULL - validation rules implemented)
- Scenario 5: Markdown body scaffold matches ticket conventions (FULL - all scaffolds created)

## Implementation Checklist

### Unit Tests First (TDD - RED)

- [ ] Create `tests/unit/templates/test_field_schemas.py`
- [ ] Write tests for init.md field schema (2+ tests: required fields, types)
- [ ] Write tests for epic.md field schema (2+ tests)
- [ ] Write tests for story.md field schema (2+ tests)
- [ ] Write tests for task.md field schema (2+ tests)
- [ ] Write tests for bug.md field schema (2+ tests)
- [ ] Write tests for custom.md field schema (2+ tests)
- [ ] Create `tests/unit/templates/test_template_substitution.py`
- [ ] Write tests for variable substitution in each template (6+ tests)
- [ ] Write tests for template rendering with string.Template (2+ tests)
- [ ] Run tests - all fail âœ“

### Implementation (GREEN) - Template Creation

#### init.md (Initiative Template)

- [ ] Create `skills/gitstory/templates/init.md`
- [ ] Add YAML frontmatter with fields:
  - [ ] title (string, required, 10-100 chars)
  - [ ] timeline (string, required, e.g., "Q1-Q2 2025")
  - [ ] status (enum, required: ["Not Started", "In Progress", "Complete"])
  - [ ] key_results (array, required, >=2 items)
  - [ ] epic_list (array, required)
- [ ] Add markdown scaffold:
  ```markdown
  # INIT-${init_id}: ${title}

  **Timeline**: ${timeline} | **Status**: ${status_symbol} | **Owner**: ${owner}

  ## Objective
  ${objective}

  ## Key Results
  ${key_results}

  ## Epics
  ${epic_list}
  ```

#### epic.md (Epic Template)

- [ ] Create `skills/gitstory/templates/epic.md`
- [ ] Add YAML frontmatter with fields:
  - [ ] title (string, required, 10-100 chars)
  - [ ] parent_init (string, required, pattern: ^INIT-\d{4}$)
  - [ ] status (enum, required)
  - [ ] story_points (number, enum: [8, 13, 21, 34])
  - [ ] story_list (array, required)
- [ ] Add markdown scaffold with H1 title, H2 sections

#### story.md (Story Template)

- [ ] Create `skills/gitstory/templates/story.md`
- [ ] Add YAML frontmatter with fields (per Technical Design):
  - [ ] title (string, required, minLength: 10, maxLength: 100)
  - [ ] parent_epic (string, required, pattern: ^EPIC-\d{4}\.\d+$)
  - [ ] story_points (number, required, enum: [1, 2, 3, 5, 8, 13, 21])
  - [ ] status (enum, required)
  - [ ] acceptance_criteria (array, required, minItems: 3)
  - [ ] bdd_scenarios (array)
  - [ ] task_list (array)
- [ ] Add markdown scaffold:
  ```markdown
  # STORY-${story_id}: ${title}

  **Parent Epic**: [${parent_epic}](../README.md)
  **Status**: ${status_symbol} ${status}
  **Story Points**: ${story_points}
  **Progress**: ${progress_bar} ${progress_pct}%

  ## User Story
  As a ${user_type}
  I want ${goal}
  So that ${benefit}

  ## Acceptance Criteria
  ${acceptance_criteria}

  ## BDD Scenarios
  ${bdd_scenarios}

  ## Tasks
  ${task_table}
  ```

#### task.md (Task Template)

- [ ] Create `skills/gitstory/templates/task.md`
- [ ] Add YAML frontmatter with fields:
  - [ ] title (string, required, 10-100 chars)
  - [ ] parent_story (string, required, pattern: ^STORY-\d{4}\.\d+\.\d+$)
  - [ ] hours (number, required, minimum: 1, maximum: 8)
  - [ ] status (enum, required)
  - [ ] implementation_steps (array, required)
  - [ ] test_requirements (array, required)
- [ ] Add markdown scaffold with Implementation, Testing, Verification sections

#### bug.md (Bug Template)

- [ ] Create `skills/gitstory/templates/bug.md`
- [ ] Add YAML frontmatter with fields:
  - [ ] title (string, required, 10-100 chars)
  - [ ] severity (enum, required: ["ðŸ”´ Critical", "ðŸŸ  Major", "ðŸŸ¡ Minor", "ðŸŸ¢ Trivial"])
  - [ ] status (enum, required)
  - [ ] reproduction_steps (array, required, minItems: 2)
  - [ ] expected_behavior (string, required)
  - [ ] actual_behavior (string, required)
  - [ ] environment (object, required: {os, version})
- [ ] Add markdown scaffold with Reproduction, Expected/Actual, Environment sections

#### custom.md (Custom Template)

- [ ] Create `skills/gitstory/templates/custom.md`
- [ ] Add YAML frontmatter with extensible field examples:
  - [ ] title (string, required)
  - [ ] type (string, required)
  - [ ] custom_fields (array, flexible schema)
  - [ ] feature_flags (array, optional)
  - [ ] metrics (object, optional)
  - [ ] performance_targets (object, optional)
- [ ] Add markdown scaffold with flexible sections
- [ ] Run tests - all pass âœ“

### Field Validation Rules

- [ ] Implement ticket ID regex validation: `^[A-Z]+-\d{4}(\.\d+)*$`
- [ ] Implement URL validation for repository fields
- [ ] Implement status enum constraints with symbol mapping
- [ ] Implement story_points Fibonacci scale validation
- [ ] Implement hours range validation (1-8 for tasks)
- [ ] Implement severity enum validation for bugs

### BDD Implementation (Scenarios 2, 3, 5)

- [ ] Implement step: "Given skills/gitstory/templates/story.md"
- [ ] Implement step: "When I parse the YAML frontmatter"
- [ ] Implement step: "Then it includes name, description, fields array with >=3 definitions"
- [ ] Implement step: "And each field has: name, type, description, required"
- [ ] Implement step: "And field types include: enum, string, number, boolean, array"
- [ ] Implement step: "Given all 6 templates with YAML frontmatter"
- [ ] Implement step: "When I validate field definitions"
- [ ] Implement step: "Then string fields include minLength and maxLength"
- [ ] Implement step: "And ticket ID fields validate with regex: ^[A-Z]+-\d{4}(\.\d+)*$"
- [ ] Implement step: "Given skills/gitstory/templates/task.md"
- [ ] Implement step: "When I review the markdown body"
- [ ] Implement step: "Then it includes # TASK-NNNN.N.N.N: [Title] heading"
- [ ] Implement step: "And heading levels follow hierarchy: H1 title, H2 sections, H3 subsections"
- [ ] Run BDD tests - Scenarios 1-3, 5-6 pass (5/6 passing) âœ“

### Verification

- [ ] All unit tests pass (18+ tests, >90% coverage)
- [ ] All 6 templates exist in skills/gitstory/templates/
- [ ] Each template has valid YAML frontmatter (parseable with yaml.safe_load())
- [ ] Each template includes complete field schemas with validation rules
- [ ] Each template has markdown scaffold with proper heading levels
- [ ] BDD Scenarios 1-3, 5-6 passing (5/6 passing)
- [ ] Templates render correctly in markdown preview

## Files to Create/Modify

- CREATE: `skills/gitstory/templates/init.md` (~80 lines, YAML + scaffold)
- CREATE: `skills/gitstory/templates/epic.md` (~90 lines)
- CREATE: `skills/gitstory/templates/story.md` (~110 lines)
- CREATE: `skills/gitstory/templates/task.md` (~100 lines)
- CREATE: `skills/gitstory/templates/bug.md` (~90 lines)
- CREATE: `skills/gitstory/templates/custom.md` (~80 lines)
- CREATE: `tests/unit/templates/test_field_schemas.py` (~150 lines, 12+ tests)
- CREATE: `tests/unit/templates/test_template_substitution.py` (~100 lines, 6+ tests)
- MODIFY: `tests/e2e/steps/test_templates.py` (implement steps for Scenarios 2, 3, 5)

## Pattern Reuse

- `string.Template variable substitution` (Python stdlib) - Safe variable substitution with ${var} syntax, no external dependencies
- `YAML frontmatter parsing` (from TASK-2) - Reuse parse_frontmatter() and validate_field_schema() functions

## Field Schema Examples (from Technical Design)

Reference the complete field validation rules in story README (lines 204-243):
- ticket_id pattern: `^[A-Z]+-\d{4}(\.\d+)*$`
- status enum: ["Not Started", "In Progress", "Complete", "Blocked", "Archived"]
- story_points enum: [1, 2, 3, 5, 8, 13, 21]
- hours range: minimum 1, maximum 8
- severity enum: ["ðŸ”´ Critical", "ðŸŸ  Major", "ðŸŸ¡ Minor", "ðŸŸ¢ Trivial"]

## Quality Thresholds

- Word count per template: 150-300 words (excluding code blocks)
- Heading depth: Maximum H3 (no H4 or deeper)
- Field schema completeness: All templates must define >=3 required fields
- YAML validity: 100% parseable with yaml.safe_load()
